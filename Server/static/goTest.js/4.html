<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grille 25x25 avec GoJS</title>
    <script src="https://unpkg.com/gojs/release/go.js"></script>
    <style>
        #myDiagramDiv {
            width: 100%;
            height: 600px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h2>Grille 25x25</h2>
    <div id="myDiagramDiv"></div>

    <script>
        const $ = go.GraphObject.make;
        const rows = 25, cols = 25; // Taille de la grille
        const nodeSize = 100; // Taille d'une cellule
        let myDiagram;

        // Initialisation du diagramme
        function init() {
            myDiagram = $(go.Diagram, "myDiagramDiv", {
                "animationManager.isEnabled": false,
                "panningTool.isEnabled": false,
                isReadOnly: false, // Permet de cliquer sur les cellules
                allowZoom: false,
                allowSelect: false,
                initialAutoScale: go.AutoScale.Uniform
            });

            // Template des cellules
            myDiagram.nodeTemplate = $(
                go.Node,
                "Auto",
                { locationSpot: go.Spot.Center },
                $(
                    go.Shape,
                    "Rectangle",
                    {
                        fill: "white", // Couleur par défaut
                        stroke: "#A2A2A2", // Couleur de la bordure
                        strokeWidth: 1,
                        width: nodeSize,
                        height: nodeSize
                    },
                    new go.Binding("fill", "color") // Lie la couleur à la propriété "color"
                ),
                {
                    click: (e, node) => {
                        // Changer la couleur de la cellule au clic
                        const colors = ["white", "lightblue", "lightgreen", "pink", "yellow"];
                        const currentColor = node.data.color || "white";
                        const nextColor = colors[(colors.indexOf(currentColor) + 1) % colors.length] || colors[0];
                        myDiagram.model.setDataProperty(node.data, "color", nextColor);
                    }
                }
            );

            // Création de la grille
            const nodeDataArray = [];
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    nodeDataArray.push({
                        key: `${i}-${j}`, // Identifiant unique
                        loc: new go.Point(j * nodeSize, i * nodeSize), // Position dans la grille
                        color: "green" // Couleur initiale
                    });
                }
            }

            // Appliquer le modèle
            myDiagram.model = new go.GraphLinksModel({ nodeDataArray });
        }

        // Initialisation au chargement de la page
        window.addEventListener("DOMContentLoaded", init);
    </script>
</body>
</html>